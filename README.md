# STM32 Button SPI Counter

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![STM32CubeIDE](https://img.shields.io/badge/IDE-STM32CubeIDE-%230052b1.svg?logo=stmicroelectronics)](https://www.st.com/en/development-tools/stm32cubeide.html)
[![STM32F4](https://img.shields.io/badge/MCU-STM32F4-%23032671.svg?logo=stmicroelectronics)](https://www.st.com/en/microcontrollers-microprocessors/stm32f4-series.html)

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ STM32, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å—á—ë—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–∫–∏ —Å –≤—ã–≤–æ–¥–æ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ç—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å –ø–æ–º–æ—â—å—é SPI –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏.

<!-- –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ - –≤—Å—Ç–∞–≤—å—Ç–µ —Ç—É—Ç -->
<!-- ![–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã](docs/demo.gif) -->

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è-–ø–µ—Ä–∏—Ñ–µ—Ä–∏—è-–∏-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](#-—Å—Ö–µ–º–∞-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—Å–±–æ—Ä–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê–≤—Ç–æ—Ä](#-–∞–≤—Ç–æ—Ä)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

## üöÄ –û –ø—Ä–æ–µ–∫—Ç–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å:
*   **–í–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ (EXTI)** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–∫–∏.
*   **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º SPI** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–≤–∏–≥–æ–≤—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º 74HC595.
*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π** –¥–ª—è –≤—ã–≤–æ–¥–∞ —á–∏—Å–ª–∞ –Ω–∞ —Ç—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä.
*   **–î—Ä–∞–π–≤–µ—Ä–æ–º HAL** –æ—Ç STMicroelectronics.

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (–æ—Ç 0 –¥–æ 999, –∑–∞—Ç–µ–º —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è). –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ.

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** STM32F401CCU6 (–Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–∏—è—Ö)
*   **–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è –ú–ö:**
    *   GPIO (–ö–Ω–æ–ø–∫–∞, LED, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞)
    *   EXTI (–í–Ω–µ—à–Ω–µ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ –∫–Ω–æ–ø–∫–µ)
    *   SPI (–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
*   **–í–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
    *   –ö–Ω–æ–ø–∫–∞
    *   –°–≤–µ—Ç–æ–¥–∏–æ–¥ (–∏–Ω–¥–∏–∫–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è)
    *   –¢—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ —Å–¥–≤–∏–≥–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä .
*   **–°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** STM32CubeIDE
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫:** STM32CubeF4 HAL
*   **–Ø–∑—ã–∫:** C

## üîå –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

<!-- –û–ø–∏—à–∏—Ç–µ –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ö–µ–º—ã. –≠—Ç–æ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –≤–∞–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª! -->

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–æ–Ω—Ç–∞–∫—Ç STM32 |
| :--- | :--- |
| –ö–Ω–æ–ø–∫–∞ | PB3 (EXTI3) |
| –°–≤–µ—Ç–æ–¥–∏–æ–¥ (LED) | PA5 |
| SPI3_SCK | PB3 |
| SPI3_MISO | PB4 |
| SPI3_MOSI | PB5 |
| Chip Select (SC) | PB6 |
| –†–∞–∑—Ä—è–¥ "–ï–¥–∏–Ω–∏—Ü—ã" | PB8 |
| –†–∞–∑—Ä—è–¥ "–î–µ—Å—è—Ç–∫–∏" | PB9 |
| –†–∞–∑—Ä—è–¥ "–°–æ—Ç–Ω–∏" | PB7 |

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–∏–Ω—ã —É–∫–∞–∑–∞–Ω—ã –∏—Å—Ö–æ–¥—è –∏–∑ –∫–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GPIO. –£—Ç–æ—á–Ω–∏—Ç–µ –¥–ª—è —Å–≤–æ–µ–π –ø–ª–∞—Ç—ã.*

## üõ† –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
    ```bash
    git clone https://github.com/FSHE-IIoT/stm32-button-spi-7seg.git
    cd stm32-button-spi-7seg
    ```

2.  **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ STM32CubeIDE.
    *   –í—ã–±–µ—Ä–∏—Ç–µ `File -> Import -> General -> Existing Projects into Workspace`.
    *   –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ.

3.  **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
    *   –í IDE –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ –º–æ–ª–æ—Ç–∫–∞ (`Build` –∏–ª–∏ `Ctrl+B`).

4.  **–ü—Ä–æ—à–∏–≤–∫–∞ –ú–ö**
    *   –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –ø–ª–∞—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ST-Link) –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É –∏ –ú–ö.
    *   –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ "–∂—É—á–∫–∞" (`Debug` –∏–ª–∏ `F11`). –°—Ä–µ–¥–∞ —Å–∞–º–∞ —Å–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ –Ω–∞–¥–æ) –∏ –ø—Ä–æ—à—å—ë—Ç –µ–≥–æ.

5.  **–ó–∞–ø—É—Å–∫**
    *   –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è. –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —á–∏—Å–ª–∞ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
