# STM32 Button SPI Counter

**Choose your language / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ :**

*   [English](README.md)
*   [–†—É—Å—Å–∫–∏–π](README.ru.md)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![STM32CubeIDE](https://img.shields.io/badge/IDE-STM32CubeIDE-%230052b1.svg?logo=stmicroelectronics)](https://www.st.com/en/development-tools/stm32cubeide.html)
[![STM32F4](https://img.shields.io/badge/MCU-STM32F4-%23032671.svg?logo=stmicroelectronics)](https://www.st.com/en/microcontrollers-microprocessors/stm32f4-series.html)

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ STM32, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å—á—ë—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–∫–∏ —Å –≤—ã–≤–æ–¥–æ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ç—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å –ø–æ–º–æ—â—å—é SPI –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏.

![C—á–µ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–∫–∏](Docs/btn_counter.jpg)

[–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã](Docs/btn_counter.mp4)

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è-–ø–µ—Ä–∏—Ñ–µ—Ä–∏—è-–∏-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](#-—Å—Ö–µ–º–∞-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—Å–±–æ—Ä–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ê–≤—Ç–æ—Ä](#-–∞–≤—Ç–æ—Ä)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

## üöÄ –û –ø—Ä–æ–µ–∫—Ç–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å:
*   **–í–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ (EXTI)** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–∫–∏.
*   **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º SPI** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–≤–∏–≥–æ–≤—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º 74HC595.
*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π** –¥–ª—è –≤—ã–≤–æ–¥–∞ —á–∏—Å–ª–∞ –Ω–∞ —Ç—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä.
*   **–î—Ä–∞–π–≤–µ—Ä–æ–º HAL** –æ—Ç STMicroelectronics.

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (–æ—Ç 0 –¥–æ 999, –∑–∞—Ç–µ–º —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è). –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ.

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:** STM32F401CCU6 (–Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–∏—è—Ö) –≤ —Å–æ—Å—Ç–∞–≤–µ –Ω–∞–±–æ—Ä–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ [MCUINSIDE v 1.0] (https://electronics-krd.ru/magazin/product/stmf401)
*   **–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è –ú–ö (–Ω–∞ –ø–ª–∞—Ç–µ –Ω–∞–±–æ—Ä–∞, –Ω–æ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞ –º–∞–∫–µ—Ç–Ω–æ–π –ø–ª–∞—Ç–µ):**
    *   GPIO (–ö–Ω–æ–ø–∫–∞, LED, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞)
    *   EXTI (–í–Ω–µ—à–Ω–µ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ –∫–Ω–æ–ø–∫–µ)
    *   SPI (–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
*   **–í–Ω–µ—à–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–Ω–∞ –ø–ª–∞—Ç–µ –Ω–∞–±–æ—Ä–∞, –Ω–æ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–∞ –º–∞–∫–µ—Ç–Ω–æ–π –ø–ª–∞—Ç–µ):**
    *   –ö–Ω–æ–ø–∫–∞
    *   –°–≤–µ—Ç–æ–¥–∏–æ–¥ (–∏–Ω–¥–∏–∫–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è)
    *   –¢—Ä—ë—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–π —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ —Å–¥–≤–∏–≥–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä .
*   **–°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** STM32CubeIDE
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫:** STM32CubeF4 HAL
*   **–Ø–∑—ã–∫:** C

## üîå –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

<!-- –û–ø–∏—à–∏—Ç–µ –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ö–µ–º—ã. –≠—Ç–æ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –≤–∞–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª! -->

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–æ–Ω—Ç–∞–∫—Ç STM32 |–ö–æ–Ω—Ç–∞–∫—Ç 74HC595P | –ö–æ–Ω—Ç–∞–∫—Ç FJ3361H |
| :--- | :--- | :--- | :--- |
| –ö–Ω–æ–ø–∫–∞ | PA3 (EXTI3) | - | - |
| –°–≤–µ—Ç–æ–¥–∏–æ–¥ (LED) | PA5 | - | - |
| SPI3_SCK | PB3 | SHCP | - |
| SPI3_MOSI | PB5 | DS | - |
| Chip Select (SC) | PB4 | STCP | - |
| –†–∞–∑—Ä—è–¥ "–ï–¥–∏–Ω–∏—Ü—ã" | PB10 | - | 3 |
| –†–∞–∑—Ä—è–¥ "–î–µ—Å—è—Ç–∫–∏" | PB2 | - | 2 |
| –†–∞–∑—Ä—è–¥ "–°–æ—Ç–Ω–∏" | PB1 | - | 1 |
| | | Q0 | A |
| | | Q1 | B |
| | | Q2 | C |
| | | Q3 | D |
| | | Q4 | E |
| | | Q5 | F |
| | | Q6 | G |
| | | Q7 | P |


## üõ† –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
    ```bash
    git clone https://github.com/FSHE-IIoT/stm32-button-spi-7seg.git
    cd stm32-button-spi-7seg
    ```

2.  **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ STM32CubeIDE.
    *   –í—ã–±–µ—Ä–∏—Ç–µ `File -> Import -> General -> Existing Projects into Workspace`.
    *   –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ.

3.  **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
    *   –í IDE –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª button_counter.ioc.
    *   –í –ø–∞–Ω–µ–ª–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ `Device Configuration Tool Code Generation`.
    *   –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ –º–æ–ª–æ—Ç–∫–∞ (`Build` –∏–ª–∏ `Ctrl+B`).

4.  **–ü—Ä–æ—à–∏–≤–∫–∞ –ú–ö**
    *   –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –ø–ª–∞—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ST-Link) –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É –∏ –ú–ö.
    *   –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ "–∂—É—á–∫–∞" (`Debug` –∏–ª–∏ `F11`). –°—Ä–µ–¥–∞ —Å–∞–º–∞ —Å–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ –Ω–∞–¥–æ) –∏ –ø—Ä–æ—à—å—ë—Ç –µ–≥–æ.

5.  **–ó–∞–ø—É—Å–∫**
    *   –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è. –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —á–∏—Å–ª–∞ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
    
    stm32-button-spi-7seg/
    ‚îÇ
    ‚îú‚îÄ‚îÄ Core/
    ‚îÇ   ‚îú‚îÄ‚îÄ Inc/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.h              // –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CubeMX
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stm32f4xx_hal_conf.h // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HAL
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ btn_counter.h       // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–Ω–æ–ø–∫–æ–π, —Å—á–µ—Ç—á–∏–∫–æ–º –∏ –¥–∏—Å–ø–ª–µ–µ–º
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚îÄ Src/
    ‚îÇ       ‚îú‚îÄ‚îÄ main.c              // –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
    ‚îÇ       ‚îú‚îÄ‚îÄ stm32f4xx_it.c      // –§–∞–π–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (—Å–æ–¥–µ—Ä–∂–∏—Ç EXTI3_IRQHandler)
    ‚îÇ       ‚îú‚îÄ‚îÄ stm32f4xx_hal_msp.c // HAL-–æ–≤—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏
    ‚îÇ       ‚îî‚îÄ‚îÄ btn_counter.c       // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ —Å—á–µ—Ç—á–∏–∫–∞, –¥–∏—Å–ø–ª–µ—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ SPI
    ‚îÇ
    ‚îú‚îÄ‚îÄ Drivers/                    // –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ STM32CubeF4 (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–µ–¥–æ–π)
    ‚îú‚îÄ‚îÄ STM32F401CCUx_FLASH.ld     // –°–∫—Ä–∏–ø—Ç –ª–∏–Ω–∫–æ–≤–∫–∏
    ‚îî‚îÄ‚îÄ button_counter.ioc         // –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ CubeMX
    
### –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:

1.  **`main.c:`**

    *   –í—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é HAL, —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (—á–µ—Ä–µ–∑ `MX_*_Init()`).
    *   –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥—É–ª–∏, –≤—ã–∑—ã–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `btn_counter.c`.
    *   –í –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ (`while (1)`) –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∏—Å–ø–ª–µ–π, –ø–æ–ª—É—á–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞.

2.  **`btn_counter.h` / `btn_counter.c`:**

    *   **C–µ—Ä–¥—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞.** –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –ª–æ–≥–∏–∫—É.
    *   `Display_InitTypeDef`: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∏–Ω–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä—è–¥–∞–º–∏ –¥–∏—Å–ø–ª–µ—è.
    *   `led_init()`, `btn_init()`, `transmit_init()`, `display_init()`: –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
    *   `get_counter()`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞.
    *   `update_display()`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ (–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è).
    *   `HAL_GPIO_EXTI_Callback()`: **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–æ –∫–Ω–æ–ø–∫–µ**. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å—á—ë—Ç—á–∏–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–≤–µ—Ç–æ–¥–∏–æ–¥.

3.  **`stm32fxx_it.c:`(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)**

    *   –°–æ–¥–µ—Ä–∂–∏—Ç –≤–µ–∫—Ç–æ—Ä –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π. –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–∫–∏ (PA3 -> EXTI3) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∑–¥–µ—Å—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `EXTI3_IRQHandler()`, –∫–æ—Ç–æ—Ä–∞—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –≤—ã–∑—ã–≤–∞–µ—Ç HAL-–æ–≤—Å–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é `HAL_GPIO_EXTI_Callback()` –≤ `btn_counter.c`.

4.  **`button_counter.ioc`:**

    *   –í–∏–∑—É–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∏–Ω–æ–≤ –∏ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –≤ STM32CubeMX. –ó–¥–µ—Å—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
        *   SPI3 –≤ —Ä–µ–∂–∏–º–µ Master.
        *   –ü–∏–Ω—ã PA5 (LED) –∏ PB4 (Chip Select) –∫–∞–∫ GPIO Output.
        *   –ü–∏–Ω PA3 (–ö–Ω–æ–ø–∫–∞) –∫–∞–∫ GPIO External Interrupt.
        *   –ü–∏–Ω—ã PB1, PB2, PB10 (–†–∞–∑—Ä—è–¥—ã –¥–∏—Å–ø–ª–µ—è) –∫–∞–∫ GPIO Output.

## üë®üíª –ê–≤—Ç–æ—Ä

**Oleg Dobrovolsky**  

FSHE IIoT - Full Stack Hardware Engineer, Industrial Internet of Things

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [LICENSE](https://opensource.org/licenses/MIT)
